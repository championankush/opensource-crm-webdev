{"level":"error","message":"Error loading workflow rules: Cannot read properties of undefined (reading 'all')","service":"crm-api","stack":"TypeError: Cannot read properties of undefined (reading 'all')\n    at C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\config\\database.js:360:8\n    at new Promise (<anonymous>)\n    at allQuery (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\config\\database.js:359:10)\n    at loadWorkflowRules (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\automation.js:79:25)\n    at initializeAutomationEngine (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\automation.js:72:3)\n    at Object.<anonymous> (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\automation.js:534:1)\n    at Module._compile (node:internal/modules/cjs/loader:1364:14)\n    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)\n    at Module.load (node:internal/modules/cjs/loader:1203:32)\n    at Module._load (node:internal/modules/cjs/loader:1019:12)\n    at Module.require (node:internal/modules/cjs/loader:1231:19)\n    at require (node:internal/modules/helpers:177:18)\n    at Object.<anonymous> (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\index.js:33:26)\n    at Module._compile (node:internal/modules/cjs/loader:1364:14)\n    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)\n    at Module.load (node:internal/modules/cjs/loader:1203:32)","timestamp":"2025-06-29 13:09:53"}
{"level":"error","message":"Error loading scheduled tasks: Cannot read properties of undefined (reading 'all')","service":"crm-api","stack":"TypeError: Cannot read properties of undefined (reading 'all')\n    at C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\config\\database.js:360:8\n    at new Promise (<anonymous>)\n    at allQuery (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\config\\database.js:359:10)\n    at loadScheduledTasks (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\automation.js:96:25)\n    at initializeAutomationEngine (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\automation.js:73:3)\n    at Object.<anonymous> (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\automation.js:534:1)\n    at Module._compile (node:internal/modules/cjs/loader:1364:14)\n    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)\n    at Module.load (node:internal/modules/cjs/loader:1203:32)\n    at Module._load (node:internal/modules/cjs/loader:1019:12)\n    at Module.require (node:internal/modules/cjs/loader:1231:19)\n    at require (node:internal/modules/helpers:177:18)\n    at Object.<anonymous> (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\index.js:33:26)\n    at Module._compile (node:internal/modules/cjs/loader:1364:14)\n    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)\n    at Module.load (node:internal/modules/cjs/loader:1203:32)","timestamp":"2025-06-29 13:09:53"}
{"level":"error","message":"Error loading workflow rules: Cannot read properties of undefined (reading 'all')","service":"crm-api","stack":"TypeError: Cannot read properties of undefined (reading 'all')\n    at C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\config\\database.js:360:8\n    at new Promise (<anonymous>)\n    at allQuery (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\config\\database.js:359:10)\n    at loadWorkflowRules (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\automation.js:79:25)\n    at initializeAutomationEngine (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\automation.js:72:3)\n    at Object.<anonymous> (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\automation.js:534:1)\n    at Module._compile (node:internal/modules/cjs/loader:1364:14)\n    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)\n    at Module.load (node:internal/modules/cjs/loader:1203:32)\n    at Module._load (node:internal/modules/cjs/loader:1019:12)\n    at Module.require (node:internal/modules/cjs/loader:1231:19)\n    at require (node:internal/modules/helpers:177:18)\n    at Object.<anonymous> (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\index.js:33:26)\n    at Module._compile (node:internal/modules/cjs/loader:1364:14)\n    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)\n    at Module.load (node:internal/modules/cjs/loader:1203:32)","timestamp":"2025-06-29 13:12:51"}
{"level":"error","message":"Error loading scheduled tasks: Cannot read properties of undefined (reading 'all')","service":"crm-api","stack":"TypeError: Cannot read properties of undefined (reading 'all')\n    at C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\config\\database.js:360:8\n    at new Promise (<anonymous>)\n    at allQuery (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\config\\database.js:359:10)\n    at loadScheduledTasks (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\automation.js:96:25)\n    at initializeAutomationEngine (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\automation.js:73:3)\n    at Object.<anonymous> (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\automation.js:534:1)\n    at Module._compile (node:internal/modules/cjs/loader:1364:14)\n    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)\n    at Module.load (node:internal/modules/cjs/loader:1203:32)\n    at Module._load (node:internal/modules/cjs/loader:1019:12)\n    at Module.require (node:internal/modules/cjs/loader:1231:19)\n    at require (node:internal/modules/helpers:177:18)\n    at Object.<anonymous> (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\index.js:33:26)\n    at Module._compile (node:internal/modules/cjs/loader:1364:14)\n    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)\n    at Module.load (node:internal/modules/cjs/loader:1203:32)","timestamp":"2025-06-29 13:12:51"}
{"__augmented":true,"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Database query error: SQLITE_ERROR: no such column: avatar","service":"crm-api","stack":"Error: SQLITE_ERROR: no such column: avatar\n--> in Database#get('SELECT id, email, first_name, last_name, role, avatar, created_at FROM users WHERE id = ?', [ 1 ], [Function (anonymous)])\n    at C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\config\\database.js:347:8\n    at new Promise (<anonymous>)\n    at getQuery (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\config\\database.js:346:10)\n    at C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\auth.js:120:24\n    at Layer.handle [as handle_request] (C:\\Users\\ankba\\Desktop\\opensource-crm\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ankba\\Desktop\\opensource-crm\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ankba\\Desktop\\opensource-crm\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ankba\\Desktop\\opensource-crm\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ankba\\Desktop\\opensource-crm\\node_modules\\express\\lib\\router\\index.js:284:15","timestamp":"2025-06-29 13:18:22"}
{"__augmented":true,"code":"SQLITE_ERROR","errno":1,"level":"error","message":"Database query error: SQLITE_ERROR: no such column: avatar","service":"crm-api","stack":"Error: SQLITE_ERROR: no such column: avatar\n--> in Database#get('SELECT id, email, first_name, last_name, role, avatar, created_at FROM users WHERE id = ?', [ 1 ], [Function (anonymous)])\n    at C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\config\\database.js:347:8\n    at new Promise (<anonymous>)\n    at getQuery (C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\config\\database.js:346:10)\n    at C:\\Users\\ankba\\Desktop\\opensource-crm\\server\\routes\\auth.js:120:24\n    at Layer.handle [as handle_request] (C:\\Users\\ankba\\Desktop\\opensource-crm\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\ankba\\Desktop\\opensource-crm\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\ankba\\Desktop\\opensource-crm\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\ankba\\Desktop\\opensource-crm\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\ankba\\Desktop\\opensource-crm\\node_modules\\express\\lib\\router\\index.js:284:15","timestamp":"2025-06-29 13:18:22"}
